<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nuevos Tipos de Datos en JavaScript</title>
</head>
<body>
    <h1>Nuevos Tipos de Datos en JavaScript</h1>
    <script>
        //Símbolos
        /*
        let id = Symbol("id");
        let id2 = Symbol("id");
        console.log(id === id2);
        console.log(id, id2);
        console.log(typeof id, typeof id2);

        const NOMBRE = Symbol("nombre");
        const SALUDAR = Symbol("saludar");

        const persona = {
            [NOMBRE]: "Jon",
            edad: 21
        };

        console.log(persona);

        persona.NOMBRE = "Jonathan MirCha"
        console.log(persona);
        console.log(persona.NOMBRE);
        console.log(persona[NOMBRE]);
        persona[SALUDAR] = function () {
            console.log("Hola");
        }

        console.log(persona);
        persona[SALUDAR]();

        for (let propiedad in persona) {
            console.log(propiedad);
            console.log(persona[propiedad]);
        }

        console.log(Object.getOwnPropertySymbols(persona));*/


        //Sets
        /*
        const set = new Set([1, 2, 3, 3, 4, true, false, false, {}, {}, "hola", "Hola"])
        console.log(set);
        console.log(set.size);

        const set2 = new Set();
        set2.add(1);
        set2.add(2);
        set2.add(2);
        set2.add(3);
        set2.add(true);
        set2.add(false);
        set2.add(true);
        set2.add({});

        console.log(set2);
        console.log(set2.size);
        
        console.log("Recorriendo set");
        for (item of set) {
            console.log(item);
        }
        
        console.log("Recorriendo set2");
        set2.forEach(item => console.log(item));
        
        let arr = Array.from(set)
        console.log(arr);
        console.log(arr[0]);
        console.log(arr[9]);

        set.delete("Hola");
        console.log(set);
        
        console.log(set.has("hola"));
        console.log(set.has(19));
        
        set2.clear();
        console.log(set2);*/

        //Maps
        /*const mapa = new Map();
        mapa.set("nombre", "Jon");
        mapa.set("apellido", "MirCha");
        mapa.set("edad", 35);

        console.log(mapa);
        console.log(mapa.size);
        console.log(mapa.has("correo"));
        console.log(mapa.has("nombre"));
        console.log(mapa.get("nombre"));
        mapa.set("nombre", "Jonatan MirCha");
        console.log(mapa.get("nombre"));
        mapa.delete("apellido");
        
        mapa.set(19, "Diécinueve");
        mapa.set(false, "Falso");
        mapa.set({}, {});
        console.log(mapa);

        for (let [key, value] of mapa) {
            console.log(`Llave: ${key}, Valor: ${value}`);
        }
        
        const mapa2 = new Map([
            ["nombre", "Sasha"],
            ["edad", 7],
            ["animal", "perro"],
            [null, "nulo"]
        ]);

        console.log(mapa2);
        
        const llavesMapa2 = [... mapa2.keys()];
        const valoresMapa2 = [... mapa2.values()];

        console.log(llavesMapa2);
        console.log(valoresMapa2);*/



        //WeakSets
        //const ws = new WeakSet([1, 2, 3, 3, 4, true, false, false, {}, {}, "hola", "Hola"]);
        /*const ws = new WeakSet();
        let valor1 = {"valor1": 1}
        let valor2 = {"valor2": 2}
        let valor3 = {"valor3": 3}
        
        ws.add(valor1);
        ws.add(valor2);
        console.log(ws);
        
        
        console.log(ws.has(valor1));
        console.log(ws.has(valor2));
        console.log(ws.has(valor3));

        ws.delete(valor2);
        console.log(ws);

        ws.add(valor2);
        ws.add(valor3);
        console.log(ws);

        setInterval(() => console.log(ws), 1000);

        setTimeout(() => {
            valor1 = null;
            valor2 = null;
            valor3 = null;
        }, 5000) */

        //WeakMap
        /*const wm = new WeakMap([
            ["nombre", "Sasha"],
            ["edad", 7],
            ["animal", "perro"],
            [null, "nulo"]
        ]);*/
        /*
        const wm = new WeakMap();
        let llave1 = {};
        let llave2 = {};
        let llave3 = {};

        wm.set(llave1, 1);
        wm.set(llave2, 2);
        console.log(wm);

        console.log(wm.has(llave1));
        console.log(wm.has(llave3));

        console.log(wm.get(llave1));
        console.log(wm.get(llave2));
        console.log(wm.get(llave3));

        wm.delete(llave2);
        console.log(wm);

        wm.set(llave2, 2);
        wm.set(llave3, 3);
        console.log(wm);

        setInterval(() => console.log(wm), 1000);

        setTimeout(() => {
            llave1 = null;
            llave2 = null;
            llave3 = null;
        }, 5000)*/


        //iterables e iterators
        /*const iterable = [1, 2, 3, 4, 5];
        // const iterable = new Set([1, 2, 3, 3, 3, 4, 5, 6, 6]);
        // const iterable = "Hola Mundo";
        // const iterable = new Map([
        //     ["nombre", "Jhon"],
        //     ["edad", 35]
        // ]);
        
        //Accedemos al iterador del iterable
        const iterador = iterable[Symbol.iterator]();

        console.log(iterable);
        console.log(iterador);
        // console.log(iterador.next());
        // console.log(iterador.next());
        // console.log(iterador.next());
        // console.log(iterador.next());
        // console.log(iterador.next());
        // console.log(iterador.next());

        let next = iterador.next();

        while(!next.done){
            console.log(next.value);
            next = iterador.next();
        }*/
        
        //Generators
        /*function* iterable () {
            yield "Hola";
            console.log("Hola consola");
            yield "Hola 2";
            console.log("Seguimos con más instrucciones de nuestro código");
            yield "Hola 3";
            yield "Hola 4";
        }

        let iterador = iterable();
        // console.log(iterador.next());
        // console.log(iterador.next());
        // console.log(iterador.next());
        // console.log(iterador.next());
        // console.log(iterador.next());

        for (let y of iterador) {
            console.log(y);
        }

        const arr = [... iterable()];
        console.log(arr);

        function cuadrado(valor) {
            setTimeout(() => {
                return console.log({valor, resultado: valor * valor})
            }, Math.random()*1000);
            
        }

        function* generador() {
            console.log("Inicia Generator");
            yield cuadrado(0);
            yield cuadrado(1);
            yield cuadrado(2);
            yield cuadrado(3);
            yield cuadrado(4);
            yield cuadrado(5);
            console.log("Termina Generator");
        }

        let gen = generador()
        for (let y of gen) {
            console.log(y);
        }*/


        //Proxies
        /*const persona = {
            nombre: "",
            apellido: "",
            edad: 0
        }

        const manejador = {
            set(obj, prop, valor) {
                if(Object.keys(obj).indexOf(prop) === -1){
                    return console.error(`La propiedad "${prop}" no existe en el objeto persona.`);
                }

                if((prop === "nombre" || prop === "apellido") && !(/^[A-Za-zÑñÁáÉéÍíÓóÚú\s]+$/g.test(valor))){
                    return console.error(`La propiedad "${prop}" solo acepta letras y espacios blanco`);
                }

                obj[prop] = valor;
            }
        }

        const jon = new Proxy(persona, manejador);
        jon.nombre = "Jon";
        jon.apellido = "MirCha";
        jon.edad = 35;
        //jon.twitter = "@jonmircha";
        console.log(jon);
        console.log(persona);*/


        //Propiedades dinámicas de los objetos (Compute properties)
        /*let aleatorio = Math.round(Math.random()*100+5)
        const objUsuarios = {
            propiedad: "Valor",
            [`id_${aleatorio}`] : "Valor Aleatorio"
        }
        console.log(objUsuarios);

        const usuarios = ["Jon", "Irma", "Miguel", "Kala", "Sasha"];

        usuarios.forEach((usuario, index) => objUsuarios[`id_${index}`] = usuario);
        console.log(objUsuarios);*/



        //This
        /*console.log(this);
        console.log(window);
        console.log(this === window);

        this.nombre = "Contexto Global";
        console.log(this.nombre);
        function imprimir () {
            console.log(this.nombre);
        }
        imprimir();

        const obj = {
            nombre: "Contexto Objeto",
            imprimir: function () {
                console.log(this.nombre);
            }
        }

        obj.imprimir();

        const obj2 = {
            nombre: "Contexto Objeto 2",
            imprimir
        }
        obj2.imprimir();

        const obj3 = {
            nombre: "Contexto Objeto 3",
            imprimir: () => {
                console.log(this.nombre);
            }
        }
        obj3.imprimir();

        //Función constructora
        function Persona (nombre){
            // const that = this; //Así se usaba antes cuando no existían las arrow Functions
            this.nombre = nombre;
            
            // return console.log(this.nombre);
            // return function () {
            //     console.log(this.nombre);
            // }
            return () => {
                console.log(this.nombre);
            }
            return function () {
                console.log(that.nombre)
            }
        }        
        let jon = new Persona("Jon");
        jon();*/

        

        //call, apply y bind
        /*console.log(this);
        this.lugar = "Contexto Global";

        function saludar(saludo, aQuien) {
            console.log(`${saludo} ${aQuien} desde el ${this.lugar}`);
        }

        saludar("Hola", "Sasha");

        const obj = {
            lugar: "Contexto Objeto"
        }

        saludar.call(obj, "Hola", "Jon");
        saludar.call(null, "Hola", "Jon");
        saludar.call(this, "Hola", "Jon");
        saludar.apply(obj, ["Adios", "MirCha"]);
        saludar.apply(null, ["Adios", "MirCha"]);
        saludar.apply(this, ["Adios", "MirCha"]);

        this.nombre = "Window"

        const persona = {
            nombre: "Jon",
            saludar: function () {
                console.log(`Hola ${this.nombre}`);
            }
        }

        persona.saludar();

        const otraPersona = {
            saludar: persona.saludar.bind(persona)
        }

        otraPersona.saludar();*/



        //JSON
        const json = {
            cadena: "jon",
            numero: 35,
            booleano: true,
            arreglo: ["correr", "programar", "cocinar"],
            objeto: {
                twitter: "@jonmircha",
                email: "jonmircha@gmail.com"
            },
            nulo: null
        }

        console.log(json);
        console.log(JSON);
        console.log(JSON.parse("{}"));
        console.log(JSON.parse("[1,2,3]"));
        console.log(JSON.parse("true"));
        console.log(JSON.parse("false"));
        console.log(JSON.parse("19"));
        // console.log(JSON.parse("Hola Mundo"));
        console.log(JSON.parse("null"));
        // console.log(JSON.parse("undefined"));
        
        console.log(JSON.stringify({}));
        console.log(JSON.stringify([1,2,3]));
        console.log(JSON.stringify(true));
        console.log(JSON.stringify(false));
        console.log(JSON.stringify(null));
        console.log(JSON.stringify(undefined));
        console.log(JSON.stringify({x:2, y:3}));
        
        console.log(JSON.stringify(json));
        console.log(JSON.parse('{"cadena": "jon", "numero": 35, "booleano": true, "arreglo": ["correr", "programar", "cocinar"], "objeto": {      "twitter": "@jonmircha", "email": "jonmircha@gmail.com"}, "nulo": null}'));

    </script>
</body>
</html>